# ä»£ç è§„èŒƒæŒ‡å—

---
tags: [ä»£ç è§„èŒƒ, æ¥å£è®¾è®¡, RESTful, å‘½åè§„èŒƒ, æœ€ä½³å®è·µ]
created: 2026-02-21
updated: 2026-02-21
status: å·²å®Œæˆ
importance: â­â­â­â­â­
---

## ğŸ¯ æ ¸å¿ƒè¦ç‚¹
> RESTful API è®¾è®¡è§„èŒƒï¼Œç»Ÿä¸€å›¢é˜Ÿå¼€å‘æ ‡å‡†

- **æ¥å£å‘½å**ï¼šä½¿ç”¨ç»Ÿä¸€çš„ URL è·¯å¾„è§„èŒƒ
- **HTTP æ–¹æ³•**ï¼šæ­£ç¡®ä½¿ç”¨ GETã€POSTã€PUTã€DELETE
- **å‚æ•°ä¼ é€’**ï¼šåŒºåˆ†è·¯å¾„å‚æ•°ã€æŸ¥è¯¢å‚æ•°å’Œè¯·æ±‚ä½“
- **å“åº”æ ¼å¼**ï¼šç»Ÿä¸€çš„æ•°æ®è¿”å›æ ¼å¼

## ğŸŒ æ¥å£å‘½åè§„èŒƒ

### URL è·¯å¾„è®¾è®¡

#### åŸºç¡€è·¯å¾„æ ¼å¼
```
ip:8080/iot/{scope}/v1/{module}/{resource}
```

#### ä½œç”¨åŸŸåˆ†ç±»
| ä½œç”¨åŸŸ | è·¯å¾„ | ç”¨é€” | ç¤ºä¾‹ |
|--------|------|------|------|
| å¤–éƒ¨æ¥å£ | `/api/` | å¯¹å¤–æä¾›çš„å…¬å¼€æ¥å£ | `/iot/api/v1/system/user` |
| å¼€æ”¾æ¥å£ | `/open/` | ç¬¬ä¸‰æ–¹é›†æˆä½¿ç”¨ | `/iot/open/v1/device/data` |
| å†…éƒ¨æ¥å£ | `/inner/` | å¾®æœåŠ¡é—´è°ƒç”¨ | `/iot/inner/v1/auth/validate` |

#### å‘½åè§„åˆ™
- **ä½¿ç”¨å°å†™å­—æ¯**
- **ä½¿ç”¨è¿å­—ç¬¦ `-` è¿æ¥è¯è¯­**
- **èµ„æºåä½¿ç”¨å¤æ•°å½¢å¼**
- **å±‚çº§æ¸…æ™°ï¼Œè¯­ä¹‰æ˜ç¡®**

### RESTful æ“ä½œè§„èŒƒ

#### æ ‡å‡† CRUD æ“ä½œ
```http
# è·å–èµ„æºåˆ—è¡¨
GET /iot/api/v1/device-management/managed-devices

# åˆ›å»ºæ–°èµ„æº
POST /iot/api/v1/device-management/managed-devices

# è·å–å•ä¸ªèµ„æº
GET /iot/api/v1/device-management/managed-devices/{id}

# æ›´æ–°èµ„æº
PUT /iot/api/v1/device-management/managed-devices/{id}

# åˆ é™¤èµ„æº
DELETE /iot/api/v1/device-management/managed-devices/{id}
```

#### å¤æ‚æ“ä½œç¤ºä¾‹
```http
# è®¾å¤‡æ§åˆ¶æ“ä½œ
POST /iot/api/v1/device-management/managed-devices/{id}/control

# æ‰¹é‡æ“ä½œ
POST /iot/api/v1/device-management/managed-devices/batch-update

# çŠ¶æ€æŸ¥è¯¢
GET /iot/api/v1/device-management/managed-devices/{id}/status

# å†å²æ•°æ®
GET /iot/api/v1/device-management/managed-devices/{id}/history
```

## ğŸ“ å‚æ•°ä¼ é€’è§„èŒƒ

### æŸ¥è¯¢å‚æ•°è§„èŒƒ
```http
# åˆ†é¡µå‚æ•°
GET /api/v1/users?page=1&size=20

# ç­›é€‰å‚æ•°
GET /api/v1/devices?status=online&type=sensor

# æ’åºå‚æ•°
GET /api/v1/orders?sort=createTime&order=desc

# æœç´¢å‚æ•°
GET /api/v1/users?keyword=admin&searchType=username
```

### è¯·æ±‚ä½“ä½¿ç”¨åŸåˆ™
- **GET è¯·æ±‚**ï¼šä¸ä½¿ç”¨ RequestBody
- **åˆ†é¡µå‚æ•°**ï¼šä½¿ç”¨æŸ¥è¯¢å‚æ•°ï¼Œä¸ç”¨ RequestBody
- **ç­›é€‰æœç´¢å‚æ•°**ï¼šä½¿ç”¨æŸ¥è¯¢å‚æ•°
- **å¤æ‚æ•°æ®æäº¤**ï¼šä½¿ç”¨ RequestBody

### æ­£ç¡®ç¤ºä¾‹
```java
// âœ… æ­£ç¡®ï¼šåˆ†é¡µæŸ¥è¯¢ä½¿ç”¨æŸ¥è¯¢å‚æ•°
@GetMapping("/users")
public Result<PageInfo<User>> listUsers(
    @RequestParam(defaultValue = "1") Integer page,
    @RequestParam(defaultValue = "20") Integer size,
    @RequestParam(required = false) String keyword
) {
    // å®ç°é€»è¾‘
}

// âœ… æ­£ç¡®ï¼šå¤æ‚æ•°æ®æäº¤ä½¿ç”¨ RequestBody
@PostMapping("/users")
public Result<User> createUser(@RequestBody CreateUserRequest request) {
    // å®ç°é€»è¾‘
}
```

### é”™è¯¯ç¤ºä¾‹
```java
// âŒ é”™è¯¯ï¼šGET è¯·æ±‚ä½¿ç”¨ RequestBody
@GetMapping("/users")
public Result<PageInfo<User>> listUsers(@RequestBody QueryRequest request) {
    // ä¸æ¨è
}
```

## ğŸ¯ Controller å±‚è§„èŒƒ

### æ–¹æ³•å‘½åè§„èŒƒ
ä¸ MyBatis Plus ä¿æŒä¸€è‡´çš„å‘½åé£æ ¼ï¼š

| æ“ä½œ | Controller æ–¹æ³•å | è¯´æ˜ |
|------|------------------|------|
| æŸ¥è¯¢åˆ—è¡¨ | `list()` | è·å–èµ„æºåˆ—è¡¨ |
| æŸ¥è¯¢å•ä¸ª | `get()` | è·å–å•ä¸ªèµ„æº |
| æ–°å¢ | `save()` | åˆ›å»ºæ–°èµ„æº |
| æ›´æ–° | `update()` | æ›´æ–°èµ„æº |
| åˆ é™¤ | `remove()` | åˆ é™¤èµ„æº |

### æ ‡å‡† Controller ç¤ºä¾‹
```java
@RestController
@RequestMapping("/iot/api/v1/system/users")
public class UserController {

    @GetMapping
    public Result<PageInfo<User>> list(
        @RequestParam(defaultValue = "1") Integer page,
        @RequestParam(defaultValue = "20") Integer size,
        @RequestParam(required = false) String keyword
    ) {
        // æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨
    }

    @GetMapping("/{id}")
    public Result<User> get(@PathVariable Long id) {
        // è·å–å•ä¸ªç”¨æˆ·
    }

    @PostMapping
    public Result<User> save(@RequestBody CreateUserRequest request) {
        // åˆ›å»ºç”¨æˆ·
    }

    @PutMapping("/{id}")
    public Result<User> update(
        @PathVariable Long id,
        @RequestBody UpdateUserRequest request
    ) {
        // æ›´æ–°ç”¨æˆ·
    }

    @DeleteMapping("/{id}")
    public Result<Void> remove(@PathVariable Long id) {
        // åˆ é™¤ç”¨æˆ·
    }
}
```

## ğŸ“‹ æ¥å£è®¾è®¡æœ€ä½³å®è·µ

### 1. ç‰ˆæœ¬æ§åˆ¶
```http
# åœ¨ URL ä¸­åŒ…å«ç‰ˆæœ¬å·
/iot/api/v1/users
/iot/api/v2/users
```

### 2. çŠ¶æ€ç ä½¿ç”¨
| çŠ¶æ€ç  | å«ä¹‰ | ä½¿ç”¨åœºæ™¯ |
|--------|------|----------|
| 200 | æˆåŠŸ | æŸ¥è¯¢ã€æ›´æ–°æˆåŠŸ |
| 201 | å·²åˆ›å»º | èµ„æºåˆ›å»ºæˆåŠŸ |
| 204 | æ— å†…å®¹ | åˆ é™¤æˆåŠŸ |
| 400 | è¯·æ±‚é”™è¯¯ | å‚æ•°éªŒè¯å¤±è´¥ |
| 401 | æœªæˆæƒ | éœ€è¦ç™»å½• |
| 403 | ç¦æ­¢è®¿é—® | æƒé™ä¸è¶³ |
| 404 | æœªæ‰¾åˆ° | èµ„æºä¸å­˜åœ¨ |
| 500 | æœåŠ¡å™¨é”™è¯¯ | ç³»ç»Ÿå¼‚å¸¸ |

### 3. ç»Ÿä¸€å“åº”æ ¼å¼
```java
public class Result<T> {
    private Integer code;
    private String message;
    private T data;
    private Long timestamp;

    // æˆåŠŸå“åº”
    public static <T> Result<T> success(T data) {
        return new Result<>(200, "success", data);
    }

    // å¤±è´¥å“åº”
    public static <T> Result<T> error(String message) {
        return new Result<>(500, message, null);
    }
}
```

### 4. åˆ†é¡µå“åº”æ ¼å¼
```java
public class PageInfo<T> {
    private List<T> records;
    private Long total;
    private Integer page;
    private Integer size;
    private Integer pages;
}
```

## ğŸ”§ å®é™…åº”ç”¨ç¤ºä¾‹

### è®¾å¤‡ç®¡ç†æ¥å£è®¾è®¡
```java
@RestController
@RequestMapping("/iot/api/v1/device-management")
public class DeviceController {

    // è·å–è®¾å¤‡åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µå’Œç­›é€‰ï¼‰
    @GetMapping("/managed-devices")
    public Result<PageInfo<Device>> list(
        @RequestParam(defaultValue = "1") Integer page,
        @RequestParam(defaultValue = "20") Integer size,
        @RequestParam(required = false) String status,
        @RequestParam(required = false) String type,
        @RequestParam(required = false) String keyword
    ) {
        // å®ç°é€»è¾‘
    }

    // è·å–å•ä¸ªè®¾å¤‡è¯¦æƒ…
    @GetMapping("/managed-devices/{id}")
    public Result<Device> get(@PathVariable Long id) {
        // å®ç°é€»è¾‘
    }

    // åˆ›å»ºè®¾å¤‡
    @PostMapping("/managed-devices")
    public Result<Device> save(@RequestBody CreateDeviceRequest request) {
        // å®ç°é€»è¾‘
    }

    // æ›´æ–°è®¾å¤‡ä¿¡æ¯
    @PutMapping("/managed-devices/{id}")
    public Result<Device> update(
        @PathVariable Long id,
        @RequestBody UpdateDeviceRequest request
    ) {
        // å®ç°é€»è¾‘
    }

    // åˆ é™¤è®¾å¤‡
    @DeleteMapping("/managed-devices/{id}")
    public Result<Void> remove(@PathVariable Long id) {
        // å®ç°é€»è¾‘
    }

    // è®¾å¤‡æ§åˆ¶æ“ä½œ
    @PostMapping("/managed-devices/{id}/control")
    public Result<Void> control(
        @PathVariable Long id,
        @RequestBody DeviceControlRequest request
    ) {
        // å®ç°é€»è¾‘
    }
}
```

## ğŸ”— ç›¸å…³æ–‡æ¡£
- **æŠ€æœ¯åŸç†**ï¼š[[03-springboot.md#RESTfulæ¥å£è®¾è®¡]]
- **é¡¹ç›®å®æˆ˜**ï¼š[[06-é¡¹ç›®å®æˆ˜/é¡¹ç›®é—®é¢˜æ€»ç»“.md]]
- **æ€§èƒ½ä¼˜åŒ–**ï¼š[[06-é¡¹ç›®å®æˆ˜/æ€§èƒ½ä¼˜åŒ–å®è·µ.md]]

## ğŸ·ï¸ æ ‡ç­¾
#ä»£ç è§„èŒƒ #RESTful #æ¥å£è®¾è®¡ #SpringBoot #æœ€ä½³å®è·µ