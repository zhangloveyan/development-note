# Javaé›†åˆæ¡†æ¶

---
tags: [Java, é›†åˆæ¡†æ¶, ArrayList, HashMap, LinkedList, æ•°æ®ç»“æ„, æ ¸å¿ƒæ¦‚å¿µ]
created: 2026-02-21
updated: 2026-02-21
status: å·²æŒæ¡
importance: â­â­â­â­â­
---

## ğŸ¯ æ ¸å¿ƒè¦ç‚¹
> Javaé›†åˆæ¡†æ¶çš„æ ¸å¿ƒæ•°æ®ç»“æ„å’Œå®ç°åŸç†

- **ArrayList**ï¼šåŸºäºæ•°ç»„å®ç°ï¼Œæ”¯æŒåŠ¨æ€æ‰©å®¹ï¼ŒæŸ¥è¯¢å¿«æ’å…¥åˆ é™¤æ…¢
- **LinkedList**ï¼šåŸºäºåŒå‘é“¾è¡¨å®ç°ï¼Œæ’å…¥åˆ é™¤å¿«æŸ¥è¯¢æ…¢
- **HashMap**ï¼šåŸºäºæ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘ï¼Œæ— åºé«˜æ•ˆæŸ¥è¯¢
- **LinkedHashMap**ï¼šç»§æ‰¿HashMapï¼Œé¢å¤–ç»´æŠ¤åŒå‘é“¾è¡¨ä¿è¯æœ‰åº
- **TreeMap**ï¼šåŸºäºçº¢é»‘æ ‘å®ç°ï¼Œæ”¯æŒæ’åº

## ğŸ’¡ åŸç†è¯¦è§£

### 1. å•åˆ—é›†åˆï¼šCollectionæ¥å£

#### Listæ¥å£å®ç°

##### ArrayList
**æ•°ç»„å®ç°ã€é»˜è®¤é™æ€ç©ºæ•°ç»„**

- åˆå§‹åŒ–ï¼šnewå‡ºæ¥æ—¶æ˜¯é™æ€ç©ºæ•°ç»„ï¼Œç¬¬ä¸€æ¬¡addæ—¶ç›´æ¥è®¾ç½®ä¸º10
- æ‰©å®¹æœºåˆ¶ï¼šå½“æ·»åŠ ç¬¬11ä¸ªå…ƒç´ æ—¶ï¼Œæ‰©å®¹ä¸ºåŸé•¿åº¦çš„1.5å€ï¼ˆlength + length>>1ï¼‰
- æ‰©å®¹é™åˆ¶ï¼šåˆ¤æ–­æ˜¯å¦æº¢å‡ºInteger.MAX_VALUE-8
- æ•°æ®å¤åˆ¶ï¼šé€šè¿‡System.arraycopyå¤åˆ¶æ•°æ®
- åˆ é™¤æ“ä½œï¼šè°ƒç”¨System.arraycopyæ–¹æ³•ï¼Œå½±å“æ•ˆç‡

##### LinkedList
**åŒå‘é“¾è¡¨å®ç°**

- ç»“æ„ï¼šæ¯ä¸ªèŠ‚ç‚¹åŒ…å«æ•°æ®ã€å‰é©±æŒ‡é’ˆã€åç»§æŒ‡é’ˆ
- ä¼˜åŠ¿ï¼šæ’å…¥åˆ é™¤æ•ˆç‡é«˜O(1)
- åŠ£åŠ¿ï¼šæŸ¥è¯¢éœ€è¦éå†O(n)

#### Setæ¥å£å®ç°

##### HashSet
åŸºäºHashMapå®ç°ï¼Œå€¼ä½œä¸ºHashMapçš„keyï¼Œvalueå›ºå®šä¸ºPRESENTå¯¹è±¡

##### TreeSet
åŸºäºTreeMapå®ç°ï¼Œæ”¯æŒè‡ªå®šä¹‰æ¯”è¾ƒå™¨æ’åº

### 2. åŒåˆ—é›†åˆï¼šMapæ¥å£

#### HashMap
**æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘ç»“æ„**

![HashMapç»“æ„å›¾](../../pic/01-java/image-20221024171904653.png)

**æ ¸å¿ƒå‚æ•°ï¼š**
- åˆå§‹å®¹é‡ï¼š16
- è´Ÿè½½å› å­ï¼š0.75f
- æœ€å¤§å®¹é‡ï¼š2^30ï¼ˆ1<<30ï¼‰
- æ‰©å®¹é˜ˆå€¼ï¼šå®¹é‡ Ã— è´Ÿè½½å› å­

**æ‰©å®¹æœºåˆ¶ï¼š**
å½“å…ƒç´ æ•°é‡è¾¾åˆ°é˜ˆå€¼æ—¶ï¼Œå®¹é‡æ‰©å¤§2å€ï¼Œé‡æ–°è®¡ç®—æ‰€æœ‰å…ƒç´ ä½ç½®

**ä¸ºä»€ä¹ˆå®¹é‡æ˜¯2çš„å¹‚æ¬¡æ–¹ï¼Ÿ**
1. hash(key) % n ç­‰ä»·äº hash(key) & (n-1)ï¼Œä½è¿ç®—æ•ˆç‡æ›´é«˜
2. æ‰©å®¹æ—¶ï¼Œå…ƒç´ æ–°ä½ç½®è¦ä¹ˆæ˜¯åŸä½ç½®ï¼Œè¦ä¹ˆæ˜¯åŸä½ç½®+æ—§å®¹é‡

**é“¾è¡¨è½¬çº¢é»‘æ ‘æ¡ä»¶ï¼š**
- é“¾è¡¨é•¿åº¦ â‰¥ 8
- æ•°ç»„é•¿åº¦ â‰¥ 64
- çº¢é»‘æ ‘è½¬é“¾è¡¨ï¼šé•¿åº¦ â‰¤ 6

é€‰æ‹©8å’Œ6çš„åŸå› ï¼šä¸­é—´å·®å€¼7é˜²æ­¢é¢‘ç¹è½¬æ¢

#### LinkedHashMap
**ç»§æ‰¿HashMap + åŒå‘é“¾è¡¨**

- ç»´æŠ¤æ’å…¥é¡ºåºæˆ–è®¿é—®é¡ºåº
- é€šè¿‡before/afteræŒ‡é’ˆç»´æŠ¤é“¾è¡¨å…³ç³»
- ç¬¬ä¸€ä¸ªèŠ‚ç‚¹headçš„hashå€¼ä¸º-1

![LinkedHashMapç»“æ„å›¾](../../pic/01-java/image-20221024204128016.png)

#### TreeMap
**çº¢é»‘æ ‘å®ç°**

- æ”¯æŒè‡ªå®šä¹‰æ¯”è¾ƒå™¨è¿›è¡Œkeyæ’åº
- æŸ¥è¯¢ã€æ’å…¥ã€åˆ é™¤æ—¶é—´å¤æ‚åº¦ï¼šO(log n)

#### çº¿ç¨‹å®‰å…¨çš„é›†åˆ

##### CopyOnWriteArrayList
- é€šè¿‡ReentrantLockä¿è¯å¹¶å‘å®‰å…¨
- å†™æ—¶å¤åˆ¶æœºåˆ¶ï¼Œè¯»æ“ä½œæ— é”

##### ConcurrentHashMap
**è§£å†³HashMapçº¿ç¨‹å®‰å…¨é—®é¢˜ï¼š**

é—®é¢˜1ï¼šå¹¶å‘putæ—¶å¯èƒ½ä¸¢å¤±æ•°æ®
- è§£å†³ï¼šæ— é“¾è¡¨æ—¶ä½¿ç”¨CASï¼Œæœ‰é“¾è¡¨æ—¶å¯¹é¦–èŠ‚ç‚¹åŠ synchronizedé”

é—®é¢˜2ï¼šæ‰©å®¹æ—¶getå¯èƒ½è¿”å›null
- è§£å†³ï¼šæ‰©å®¹æ—¶æ ‡è®°é¦–èŠ‚ç‚¹ä¸ºMOVED(-1)ï¼Œå…¶ä»–çº¿ç¨‹ååŠ©æ‰©å®¹

## ğŸ”§ ä»£ç ç¤ºä¾‹

### ArrayListåŸºç¡€ç”¨æ³•
```java
List<String> list = new ArrayList<>();
list.add("element1");
list.add("element2");
// æ‰©å®¹æ¼”ç¤º
for(int i = 0; i < 15; i++) {
    list.add("item" + i); // ç¬¬11ä¸ªå…ƒç´ æ—¶è§¦å‘æ‰©å®¹
}
```

### HashMapåŸºç¡€ç”¨æ³•
```java
Map<String, Integer> map = new HashMap<>();
map.put("key1", 1);
map.put("key2", 2);

// è‡ªå®šä¹‰åˆå§‹å®¹é‡å’Œè´Ÿè½½å› å­
Map<String, Integer> customMap = new HashMap<>(32, 0.8f);
```

### LinkedHashMapä¿æŒé¡ºåº
```java
// ä¿æŒæ’å…¥é¡ºåº
Map<String, Integer> insertOrderMap = new LinkedHashMap<>();

// ä¿æŒè®¿é—®é¡ºåºï¼ˆLRUç¼“å­˜åŸºç¡€ï¼‰
Map<String, Integer> accessOrderMap = new LinkedHashMap<>(16, 0.75f, true);
```

## âš¡ æ€§èƒ½ç‰¹ç‚¹

| é›†åˆç±»å‹ | æŸ¥è¯¢ | æ’å…¥ | åˆ é™¤ | é€‚ç”¨åœºæ™¯ |
|---------|------|------|------|----------|
| ArrayList | O(1) | O(n) | O(n) | é¢‘ç¹éšæœºè®¿é—® |
| LinkedList | O(n) | O(1) | O(1) | é¢‘ç¹æ’å…¥åˆ é™¤ |
| HashMap | O(1) | O(1) | O(1) | å¿«é€ŸæŸ¥æ‰¾ |
| TreeMap | O(log n) | O(log n) | O(log n) | éœ€è¦æ’åº |
| LinkedHashMap | O(1) | O(1) | O(1) | éœ€è¦ä¿æŒé¡ºåº |

## ğŸ”— çŸ¥è¯†å…³è”
- **å‰ç½®çŸ¥è¯†**ï¼š[[JavaåŸºç¡€è¯­æ³•#æ•°æ®ç±»å‹]]
- **ç›¸å…³æŠ€æœ¯**ï¼š[[Javaå¹¶å‘ç¼–ç¨‹#çº¿ç¨‹å®‰å…¨é›†åˆ]]
- **å®æˆ˜åº”ç”¨**ï¼š[[Javaé—®é¢˜è§£å†³#é›†åˆé€‰æ‹©]]
- **åº•å±‚åŸç†**ï¼š[[Javaè™šæ‹Ÿæœº#å¯¹è±¡å†…å­˜å¸ƒå±€]]

## ğŸ·ï¸ æ ‡ç­¾
#Java #é›†åˆæ¡†æ¶ #ArrayList #HashMap #LinkedList #æ•°æ®ç»“æ„ #æ ¸å¿ƒæ¦‚å¿µ