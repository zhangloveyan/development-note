## 1. 通过 gateway、nacos 实现灰度用户功能

核心点：自定义 loadbalance、nacos metadata 标识、http头标识、openfeign透传

## 2.ssh远程通道转发请求，实现本地接入环境测试

ssh 通道服务器配置接收请求

ssh隧道 ssh -NR 6003:localhost:9080 root@139.9.177.138

### 3.nacos 使用权重 优雅发布升级

配置权重0，处理完所有请求，停机下线，升级上线，权重恢复

那么，到底什么才是SpringCloud 优雅下线呢？

包括以下内容：

- 处理没有完成的请求，注意，不再接收新的请求
- 池化资源的释放：数据库连接池，HTTP 连接池
- 处理线程的释放：请求处理线程的释放
- SpringCloud 微服务实例优雅的下线方式，主动从注册中心注销，保证其他的 RPC客户端不会发生错误的RPC调用