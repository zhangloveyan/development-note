# è®¡ç®—æœºç½‘ç»œ

---
tags: [è®¡ç®—æœºç½‘ç»œ, TCP/IP, HTTP, ç½‘ç»œåè®®, ç½‘ç»œå®‰å…¨]
created: 2026-02-21
updated: 2026-02-21
status: å·²æŒæ¡
importance: â­â­â­â­â­
---

## ğŸ¯ æ ¸å¿ƒè¦ç‚¹
> è®¡ç®—æœºç½‘ç»œçš„åŸºæœ¬åŸç†å’Œæ ¸å¿ƒåè®®

- **ç½‘ç»œåˆ†å±‚**ï¼šOSIä¸ƒå±‚æ¨¡å‹å’ŒTCP/IPå››å±‚æ¨¡å‹
- **ä¼ è¾“åè®®**ï¼šTCPå¯é ä¼ è¾“å’ŒUDPé«˜æ•ˆä¼ è¾“
- **åº”ç”¨åè®®**ï¼šHTTP/HTTPSã€DNSã€FTPç­‰åº”ç”¨å±‚åè®®
- **ç½‘ç»œå®‰å…¨**ï¼šåŠ å¯†ã€è®¤è¯å’Œé˜²æŠ¤æœºåˆ¶

## ğŸ’¡ åŸç†è¯¦è§£

### 1. ç½‘ç»œä½“ç³»ç»“æ„

#### OSIä¸ƒå±‚æ¨¡å‹ vs TCP/IPå››å±‚æ¨¡å‹

```
OSIä¸ƒå±‚æ¨¡å‹          TCP/IPå››å±‚æ¨¡å‹
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åº”ç”¨å±‚      â”‚     â”‚             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚  åº”ç”¨å±‚      â”‚
â”‚  è¡¨ç¤ºå±‚      â”‚     â”‚             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚             â”‚
â”‚  ä¼šè¯å±‚      â”‚     â”‚             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ä¼ è¾“å±‚      â”‚     â”‚  ä¼ è¾“å±‚      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç½‘ç»œå±‚      â”‚     â”‚  ç½‘ç»œå±‚      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ•°æ®é“¾è·¯å±‚   â”‚     â”‚             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚  ç½‘ç»œæ¥å£å±‚   â”‚
â”‚  ç‰©ç†å±‚      â”‚     â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å„å±‚åŠŸèƒ½
- **åº”ç”¨å±‚**ï¼šè§£å†³é€šè¿‡åº”ç”¨è¿›ç¨‹çš„äº¤äº’æ¥å®ç°ç‰¹å®šç½‘ç»œåº”ç”¨çš„é—®é¢˜
- **ä¼ è¾“å±‚**ï¼šè§£å†³è¿›ç¨‹ä¹‹é—´åŸºäºç½‘ç»œçš„é€šä¿¡é—®é¢˜
- **ç½‘ç»œå±‚**ï¼šè§£å†³åˆ†ç»„åœ¨å¤šä¸ªç½‘ç»œä¸Šä¼ è¾“ï¼ˆè·¯ç”±ï¼‰çš„é—®é¢˜
- **æ•°æ®é“¾è·¯å±‚**ï¼šè§£å†³åˆ†ç»„åœ¨ä¸€ä¸ªç½‘ç»œï¼ˆä¸€æ®µé“¾è·¯ï¼‰ä¸Šä¼ è¾“çš„é—®é¢˜
- **ç‰©ç†å±‚**ï¼šè§£å†³ä½¿ç”¨ä½•ç§ä¿¡å·æ¥ä¼ è¾“æ¯”ç‰¹çš„é—®é¢˜

### 2. æ•°æ®ä¼ è¾“è¿‡ç¨‹

ä»æµè§ˆå™¨å‘èµ·è¯·æ±‚åˆ°æœåŠ¡å™¨å“åº”çš„å®Œæ•´è¿‡ç¨‹ï¼š

```
åº”ç”¨å±‚: HTTPè¯·æ±‚
   â†“
ä¼ è¾“å±‚: æ·»åŠ TCPå¤´éƒ¨
   â†“
ç½‘ç»œå±‚: æ·»åŠ IPå¤´éƒ¨
   â†“
æ•°æ®é“¾è·¯å±‚: æ·»åŠ ä»¥å¤ªç½‘å¤´éƒ¨
   â†“
ç‰©ç†å±‚: è½¬æ¢ä¸ºç”µä¿¡å·ä¼ è¾“
```

### 3. æ€§èƒ½æŒ‡æ ‡

#### å¸¸ç”¨æ•°æ®é‡å•ä½
- 1 Byte = 8 bit
- 1 KB = 2^10 B (1024B)
- 1 MB = 2^20 B
- 1 GB = 2^30 B

#### ç½‘ç»œæ€§èƒ½æŒ‡æ ‡
- **é€Ÿç‡**ï¼šbit/s (bps)ï¼Œæ•°æ®ä¼ è¾“é€Ÿåº¦
- **å¸¦å®½**ï¼šç½‘ç»œé€šä¿¡çº¿è·¯æ‰€èƒ½ä¼ é€æ•°æ®çš„èƒ½åŠ›
- **ååé‡**ï¼šå•ä½æ—¶é—´å†…é€šè¿‡ç½‘ç»œçš„å®é™…æ•°æ®é‡
- **æ—¶å»¶**ï¼šæ•°æ®ä»å‘é€åˆ°æ¥æ”¶çš„æ—¶é—´
- **ä¸¢åŒ…ç‡**ï¼šä¸¢å¤±åˆ†ç»„æ•°é‡ä¸æ€»åˆ†ç»„æ•°é‡çš„æ¯”ç‡

## ğŸ”§ ä»£ç ç¤ºä¾‹

### åŸºç¡€ç”¨æ³•

#### TCPå®¢æˆ·ç«¯ç¤ºä¾‹
```c
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <arpa/inet.h>
#include <sys/socket.h>

#define SERVER_PORT 8080
#define BUFFER_SIZE 1024

int main() {
    int client_socket;
    struct sockaddr_in server_addr;
    char buffer[BUFFER_SIZE];
    char message[] = "Hello, Server!";

    // åˆ›å»ºsocket
    client_socket = socket(AF_INET, SOCK_STREAM, 0);
    if (client_socket == -1) {
        perror("socketåˆ›å»ºå¤±è´¥");
        exit(1);
    }

    // è®¾ç½®æœåŠ¡å™¨åœ°å€
    memset(&server_addr, 0, sizeof(server_addr));
    server_addr.sin_family = AF_INET;
    server_addr.sin_port = htons(SERVER_PORT);
    server_addr.sin_addr.s_addr = inet_addr("127.0.0.1");

    // è¿æ¥æœåŠ¡å™¨
    if (connect(client_socket, (struct sockaddr*)&server_addr,
                sizeof(server_addr)) == -1) {
        perror("è¿æ¥æœåŠ¡å™¨å¤±è´¥");
        close(client_socket);
        exit(1);
    }

    printf("å·²è¿æ¥åˆ°æœåŠ¡å™¨\n");

    // å‘é€æ•°æ®
    send(client_socket, message, strlen(message), 0);
    printf("å‘é€æ¶ˆæ¯: %s\n", message);

    // æ¥æ”¶å“åº”
    ssize_t bytes_received = recv(client_socket, buffer,
                                 sizeof(buffer) - 1, 0);
    if (bytes_received > 0) {
        buffer[bytes_received] = '\0';
        printf("æ”¶åˆ°å“åº”: %s\n", buffer);
    }

    // å…³é—­è¿æ¥
    close(client_socket);
    return 0;
}
```

#### TCPæœåŠ¡å™¨ç¤ºä¾‹
```c
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <arpa/inet.h>
#include <sys/socket.h>

#define SERVER_PORT 8080
#define BUFFER_SIZE 1024
#define MAX_CLIENTS 5

int main() {
    int server_socket, client_socket;
    struct sockaddr_in server_addr, client_addr;
    socklen_t client_addr_len = sizeof(client_addr);
    char buffer[BUFFER_SIZE];
    char response[] = "Hello, Client!";

    // åˆ›å»ºsocket
    server_socket = socket(AF_INET, SOCK_STREAM, 0);
    if (server_socket == -1) {
        perror("socketåˆ›å»ºå¤±è´¥");
        exit(1);
    }

    // è®¾ç½®socketé€‰é¡¹ï¼Œå…è®¸åœ°å€é‡ç”¨
    int opt = 1;
    setsockopt(server_socket, SOL_SOCKET, SO_REUSEADDR,
               &opt, sizeof(opt));

    // è®¾ç½®æœåŠ¡å™¨åœ°å€
    memset(&server_addr, 0, sizeof(server_addr));
    server_addr.sin_family = AF_INET;
    server_addr.sin_port = htons(SERVER_PORT);
    server_addr.sin_addr.s_addr = INADDR_ANY;

    // ç»‘å®šåœ°å€
    if (bind(server_socket, (struct sockaddr*)&server_addr,
             sizeof(server_addr)) == -1) {
        perror("bindå¤±è´¥");
        close(server_socket);
        exit(1);
    }

    // ç›‘å¬è¿æ¥
    if (listen(server_socket, MAX_CLIENTS) == -1) {
        perror("listenå¤±è´¥");
        close(server_socket);
        exit(1);
    }

    printf("æœåŠ¡å™¨å¯åŠ¨ï¼Œç›‘å¬ç«¯å£ %d\n", SERVER_PORT);

    while (1) {
        // æ¥å—å®¢æˆ·ç«¯è¿æ¥
        client_socket = accept(server_socket,
                              (struct sockaddr*)&client_addr,
                              &client_addr_len);
        if (client_socket == -1) {
            perror("acceptå¤±è´¥");
            continue;
        }

        printf("å®¢æˆ·ç«¯è¿æ¥: %s:%d\n",
               inet_ntoa(client_addr.sin_addr),
               ntohs(client_addr.sin_port));

        // æ¥æ”¶æ•°æ®
        ssize_t bytes_received = recv(client_socket, buffer,
                                     sizeof(buffer) - 1, 0);
        if (bytes_received > 0) {
            buffer[bytes_received] = '\0';
            printf("æ”¶åˆ°æ¶ˆæ¯: %s\n", buffer);

            // å‘é€å“åº”
            send(client_socket, response, strlen(response), 0);
        }

        // å…³é—­å®¢æˆ·ç«¯è¿æ¥
        close(client_socket);
    }

    close(server_socket);
    return 0;
}
```

### é«˜çº§ç”¨æ³•

#### UDPé€šä¿¡ç¤ºä¾‹
```c
// UDPæœåŠ¡å™¨
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <arpa/inet.h>
#include <sys/socket.h>

#define SERVER_PORT 8081
#define BUFFER_SIZE 1024

int main() {
    int server_socket;
    struct sockaddr_in server_addr, client_addr;
    socklen_t client_addr_len = sizeof(client_addr);
    char buffer[BUFFER_SIZE];
    char response[] = "UDP Response";

    // åˆ›å»ºUDP socket
    server_socket = socket(AF_INET, SOCK_DGRAM, 0);
    if (server_socket == -1) {
        perror("socketåˆ›å»ºå¤±è´¥");
        exit(1);
    }

    // è®¾ç½®æœåŠ¡å™¨åœ°å€
    memset(&server_addr, 0, sizeof(server_addr));
    server_addr.sin_family = AF_INET;
    server_addr.sin_port = htons(SERVER_PORT);
    server_addr.sin_addr.s_addr = INADDR_ANY;

    // ç»‘å®šåœ°å€
    if (bind(server_socket, (struct sockaddr*)&server_addr,
             sizeof(server_addr)) == -1) {
        perror("bindå¤±è´¥");
        close(server_socket);
        exit(1);
    }

    printf("UDPæœåŠ¡å™¨å¯åŠ¨ï¼Œç›‘å¬ç«¯å£ %d\n", SERVER_PORT);

    while (1) {
        // æ¥æ”¶æ•°æ®
        ssize_t bytes_received = recvfrom(server_socket, buffer,
                                         sizeof(buffer) - 1, 0,
                                         (struct sockaddr*)&client_addr,
                                         &client_addr_len);
        if (bytes_received > 0) {
            buffer[bytes_received] = '\0';
            printf("æ”¶åˆ°æ¥è‡ª %s:%d çš„æ¶ˆæ¯: %s\n",
                   inet_ntoa(client_addr.sin_addr),
                   ntohs(client_addr.sin_port), buffer);

            // å‘é€å“åº”
            sendto(server_socket, response, strlen(response), 0,
                   (struct sockaddr*)&client_addr, client_addr_len);
        }
    }

    close(server_socket);
    return 0;
}
```

#### HTTPå®¢æˆ·ç«¯ç¤ºä¾‹
```c
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <arpa/inet.h>
#include <sys/socket.h>
#include <netdb.h>

#define BUFFER_SIZE 4096

int main() {
    int client_socket;
    struct sockaddr_in server_addr;
    struct hostent *host_entry;
    char buffer[BUFFER_SIZE];
    char request[] = "GET / HTTP/1.1\r\n"
                    "Host: www.example.com\r\n"
                    "Connection: close\r\n"
                    "\r\n";

    // è§£æä¸»æœºå
    host_entry = gethostbyname("www.example.com");
    if (host_entry == NULL) {
        perror("gethostbynameå¤±è´¥");
        exit(1);
    }

    // åˆ›å»ºsocket
    client_socket = socket(AF_INET, SOCK_STREAM, 0);
    if (client_socket == -1) {
        perror("socketåˆ›å»ºå¤±è´¥");
        exit(1);
    }

    // è®¾ç½®æœåŠ¡å™¨åœ°å€
    memset(&server_addr, 0, sizeof(server_addr));
    server_addr.sin_family = AF_INET;
    server_addr.sin_port = htons(80);
    memcpy(&server_addr.sin_addr.s_addr,
           host_entry->h_addr_list[0], host_entry->h_length);

    // è¿æ¥æœåŠ¡å™¨
    if (connect(client_socket, (struct sockaddr*)&server_addr,
                sizeof(server_addr)) == -1) {
        perror("è¿æ¥å¤±è´¥");
        close(client_socket);
        exit(1);
    }

    // å‘é€HTTPè¯·æ±‚
    send(client_socket, request, strlen(request), 0);
    printf("å‘é€HTTPè¯·æ±‚:\n%s\n", request);

    // æ¥æ”¶å“åº”
    printf("HTTPå“åº”:\n");
    ssize_t bytes_received;
    while ((bytes_received = recv(client_socket, buffer,
                                 sizeof(buffer) - 1, 0)) > 0) {
        buffer[bytes_received] = '\0';
        printf("%s", buffer);
    }

    close(client_socket);
    return 0;
}
```

#### å¤šè·¯å¤ç”¨I/O - selectç¤ºä¾‹
```c
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <arpa/inet.h>
#include <sys/socket.h>
#include <sys/select.h>

#define SERVER_PORT 8082
#define BUFFER_SIZE 1024
#define MAX_CLIENTS 10

int main() {
    int server_socket, client_sockets[MAX_CLIENTS];
    struct sockaddr_in server_addr, client_addr;
    socklen_t client_addr_len = sizeof(client_addr);
    fd_set read_fds, master_fds;
    int max_fd, activity, new_socket;
    char buffer[BUFFER_SIZE];

    // åˆå§‹åŒ–å®¢æˆ·ç«¯socketæ•°ç»„
    for (int i = 0; i < MAX_CLIENTS; i++) {
        client_sockets[i] = 0;
    }

    // åˆ›å»ºæœåŠ¡å™¨socket
    server_socket = socket(AF_INET, SOCK_STREAM, 0);
    if (server_socket == -1) {
        perror("socketåˆ›å»ºå¤±è´¥");
        exit(1);
    }

    // è®¾ç½®socketé€‰é¡¹
    int opt = 1;
    setsockopt(server_socket, SOL_SOCKET, SO_REUSEADDR,
               &opt, sizeof(opt));

    // è®¾ç½®æœåŠ¡å™¨åœ°å€
    memset(&server_addr, 0, sizeof(server_addr));
    server_addr.sin_family = AF_INET;
    server_addr.sin_port = htons(SERVER_PORT);
    server_addr.sin_addr.s_addr = INADDR_ANY;

    // ç»‘å®šå’Œç›‘å¬
    bind(server_socket, (struct sockaddr*)&server_addr,
         sizeof(server_addr));
    listen(server_socket, 5);

    printf("å¤šè·¯å¤ç”¨æœåŠ¡å™¨å¯åŠ¨ï¼Œç›‘å¬ç«¯å£ %d\n", SERVER_PORT);

    // åˆå§‹åŒ–æ–‡ä»¶æè¿°ç¬¦é›†åˆ
    FD_ZERO(&master_fds);
    FD_SET(server_socket, &master_fds);
    max_fd = server_socket;

    while (1) {
        read_fds = master_fds;

        // ä½¿ç”¨selectç­‰å¾…æ´»åŠ¨
        activity = select(max_fd + 1, &read_fds, NULL, NULL, NULL);
        if (activity < 0) {
            perror("selectå¤±è´¥");
            break;
        }

        // æ£€æŸ¥æœåŠ¡å™¨socketæ˜¯å¦æœ‰æ–°è¿æ¥
        if (FD_ISSET(server_socket, &read_fds)) {
            new_socket = accept(server_socket,
                               (struct sockaddr*)&client_addr,
                               &client_addr_len);
            if (new_socket >= 0) {
                printf("æ–°å®¢æˆ·ç«¯è¿æ¥: %s:%d\n",
                       inet_ntoa(client_addr.sin_addr),
                       ntohs(client_addr.sin_port));

                // æ·»åŠ åˆ°å®¢æˆ·ç«¯æ•°ç»„
                for (int i = 0; i < MAX_CLIENTS; i++) {
                    if (client_sockets[i] == 0) {
                        client_sockets[i] = new_socket;
                        FD_SET(new_socket, &master_fds);
                        if (new_socket > max_fd) {
                            max_fd = new_socket;
                        }
                        break;
                    }
                }
            }
        }

        // æ£€æŸ¥å®¢æˆ·ç«¯socketæ˜¯å¦æœ‰æ•°æ®
        for (int i = 0; i < MAX_CLIENTS; i++) {
            int client_socket = client_sockets[i];
            if (client_socket > 0 && FD_ISSET(client_socket, &read_fds)) {
                ssize_t bytes_received = recv(client_socket, buffer,
                                             sizeof(buffer) - 1, 0);
                if (bytes_received <= 0) {
                    // å®¢æˆ·ç«¯æ–­å¼€è¿æ¥
                    printf("å®¢æˆ·ç«¯æ–­å¼€è¿æ¥\n");
                    close(client_socket);
                    FD_CLR(client_socket, &master_fds);
                    client_sockets[i] = 0;
                } else {
                    buffer[bytes_received] = '\0';
                    printf("æ”¶åˆ°æ¶ˆæ¯: %s\n", buffer);

                    // å›æ˜¾æ¶ˆæ¯
                    send(client_socket, buffer, bytes_received, 0);
                }
            }
        }
    }

    close(server_socket);
    return 0;
}
```

## âš¡ æ€§èƒ½ç‰¹ç‚¹

| åè®® | ç‰¹ç‚¹ | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| TCP | å¯é ä¼ è¾“ã€é¢å‘è¿æ¥ | Webæµè§ˆã€æ–‡ä»¶ä¼ è¾“ |
| UDP | é«˜æ•ˆä¼ è¾“ã€æ— è¿æ¥ | è§†é¢‘ç›´æ’­ã€æ¸¸æˆ |
| HTTP | æ— çŠ¶æ€ã€è¯·æ±‚å“åº” | Webåº”ç”¨ |
| HTTPS | åŠ å¯†å®‰å…¨ | æ•æ„Ÿæ•°æ®ä¼ è¾“ |

## ğŸ”— çŸ¥è¯†å…³è”

- **å‰ç½®çŸ¥è¯†**ï¼š[[è®¡ç®—æœºç»„æˆåŸç†]] [[æ“ä½œç³»ç»ŸåŸç†]]
- **ç›¸å…³æŠ€æœ¯**ï¼š[[ç½‘ç»œç¼–ç¨‹]] [[Webå¼€å‘]]
- **å®æˆ˜åº”ç”¨**ï¼š[[ç½‘ç»œæ€§èƒ½ä¼˜åŒ–]] [[ç½‘ç»œå®‰å…¨]]
- **æ·±å…¥å­¦ä¹ **ï¼š[[ç½‘ç»œåè®®åˆ†æ]] [[ç½‘ç»œæ¶æ„è®¾è®¡]]

## ğŸ·ï¸ æ ‡ç­¾
#è®¡ç®—æœºç½‘ç»œ #TCP/IP #HTTP #ç½‘ç»œåè®® #ç½‘ç»œç¼–ç¨‹ #é¢è¯•é‡ç‚¹